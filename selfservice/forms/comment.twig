{{ form_open({ 'route': 'selfservice.comment', 'method': 'post', 'class': 'add-comment validate' }) }}

    {{ form_hidden('article_id', article['id']) }}
    {{ form_hidden('type_id', type) }}
    {{ form_hidden('parent_id') }}

    <div class="sp-replying-to sp-hidden" style="background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem; display: flex; align-items: center; justify-content: space-between;">
        <p style="color: #9ca3af; font-size: 0.875rem; margin: 0;">
            {{ Lang.get('selfservice.replying_to') }} <strong style="color: #a855f7;"><span class="sp-reply-name"></span></strong>
        </p>
        {{ form_button(Lang.get('general.cancel'), {'class': 'sp-cancel-reply', 'style': 'padding: 0.5rem 1rem; background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 0.375rem; color: #d1d5db; cursor: pointer; font-size: 0.875rem;'}) }}
    </div>

    {% if not auth_check() %}
        <div class="sp-form-row">
            <div class="sp-input-container">
                {{ form_text('name', null, { 'placeholder': Lang.get('general.name'), 'style': 'width: 100%; padding: 0.75rem; background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 0.375rem; color: #f3f4f6;'}) }}
            </div>
        </div>
    {% endif %}

    <div class="sp-form-row sp-form-full">
        <div class="sp-input-container">
            {{ form_editor('text', null, {'placeholder': Lang.choice('selfservice.comment', 1)}) }}
        </div>
    </div>

    {% if auth_check() %}
        <div class="sp-form-row">
            <div class="sp-input-container">
                <label style="display: flex; align-items: center; gap: 0.5rem; color: #d1d5db; cursor: pointer;">
                    {{ form_check('notify_reply', 1, true, {'style': 'width: 1rem; height: 1rem; accent-color: #9333ea;'}) }}
                    <span>{{ Lang.get('selfservice.receive_notifications') }}</span>
                </label>
            </div>
        </div>
    {% endif %}

    {% if show_comment_captcha %}
        <div class="sp-form-row">
            <div class="sp-input-container">
                {{ Captcha.getHtml() }}
            </div>
        </div>
    {% endif %}

    <div class="sp-form-row" style="margin-top: 1rem;">
        <label></label>
        <div class="sp-input-container">
            {{ form_submit(Lang.choice('general.post', 1), {'style': 'padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #7e22ce 0%, #9333ea 50%, #a855f7 100%); color: white; border: none; border-radius: 0.5rem; font-weight: 500; font-size: 0.875rem; cursor: pointer;'}) }}
        </div>
    </div>

    {% if article.comments is not empty %}
        <div style="margin: 1.5rem 0; padding: 1.5rem 0; border-top: 1px solid rgba(168, 85, 247, 0.2);"></div>
    {% endif %}

{{ form_close() }}
